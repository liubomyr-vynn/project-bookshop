!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequire2d84;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequire2d84=a),a("iE7OH").register(JSON.parse('{"EVgbq":"index.5e5617d9.js","kFa2i":"amazon.99ff1432.jpg","hB25g":"applebooks.d7160da7.jpg","dZRhD":"bookstore.1c5b9883.jpg","flyHP":"index.d9ff9b64.js"}'));var o=document.querySelector(".categories__list");fetch("https://books-backend.p.goit.global/books/category-list").then((function(e){return e.json()})).then((function(e){var t=e.sort((function(e,t){return e.list_name<t.list_name?-1:e.list_name>t.list_name?1:0})).map((function(e){var t=e.list_name;return'<li class = "categories__item"><a href = "#" data-category = "'.concat(t,'" class = "categories__link">').concat(t,"</a></li>")}));return o.insertAdjacentHTML("beforeend",t.join("")),t}));a("i8Q71");var i=document.querySelector(".modal-start"),s=document.querySelector(".backdrop-start"),l=document.querySelector(".login-btn"),c=document.querySelector(".modal__button-x"),d=document.querySelector("div[data-modal-start]"),u=document.querySelector('label[for="user_person"]'),m=document.querySelector("#user_person"),p=(document.querySelector('label[for="user_email"]'),document.querySelector("#user_email")),f=(document.querySelector('label[for="user_password"]'),document.querySelector("#user_password"));function g(){var e=!0;return""===m.value.trim()?(m.classList.add("modal-form__field-input--error"),e=!1):m.classList.remove("modal-form__field-input--error"),""!==p.value.trim()&&p.checkValidity()?p.classList.remove("modal-form__field-input--error"):(p.classList.add("modal-form__field-input--error"),e=!1),""===f.value.trim()||f.length<5||f.value.length>12?(f.classList.add("modal-form__field-input--error"),e=!1):f.classList.remove("modal-form__field-input--error"),e}i.addEventListener("submit",(function(e){e.preventDefault(),g()?(s.classList.add("is-hidden-start"),s.style.display="none"):console.log("Error!")})),l.addEventListener("click",(function(e){i.style.display="block"})),c.addEventListener("click",(function(e){i.style.display="none"})),window.addEventListener("keydown",(function(e){"Escape"===e.key&&("Escape"!==e.key||i.contains(document.activeElement)||(i.classList.add("is-hidden-start"),s.classList.add("is-hidden-start")))})),s.addEventListener("click",(function(e){i&&e.target===s&&(i.classList.add("is-hidden-start"),s.classList.add("is-hidden-start"))})),l.addEventListener("click",(function(e){"none"===d.style.display&&(d.removeAttribute("style"),i.removeAttribute("style"))}));var y=document.querySelector('button[aria-label="link sing up"]'),v=document.querySelector('button[aria-label="link sing in"]');y.classList.add("active"),y.addEventListener("click",(function(e){e.preventDefault(),i.style.height="516px",y.classList.add("active"),v.classList.remove("active"),i.classList.remove("sing-in"),u.style.display="block",m.style.display="block",m.parentElement.parentElement.classList.remove("is-invalid"),m.parentElement.parentElement.classList.add("is-valid"),i.style.height="516px"})),v.addEventListener("click",(function(e){e.preventDefault(),v.classList.add("active"),y.classList.remove("active"),i.classList.remove("sing-in"),i.style.height="450px",u.style.display="none",m.style.display="none",m.parentElement.parentElement.classList.add("is-invalid"),m.parentElement.parentElement.classList.remove("is-valid"),g()})),function(){var e={openModalBtnSingUp:document.querySelector("button[data-modal-start-open--sing-up]"),closeModalBtnXClose:document.querySelector("button[data-modal-start-close]"),formEl:document.querySelector("[data-modal-start]"),menu:document.querySelector("[data-menu]"),menuList:document.querySelector(".nav-list"),loginBtn:document.querySelector(".login-btn"),logOutBtn:document.querySelector(".login-btn-out")};function t(){e.formEl.classList.toggle("is-hidden-start"),e.formEl.classList.toggle("display"),e.formEl.classList.contains("display")&&(e.logOutBtn.classList.add("nav-hidden"),e.loginBtn.classList.add("nav-hidden"),e.menuList.classList.add("nav-hidden"),e.menu.classList.add("mobile-is-hidden"))}e.openModalBtnSingUp.addEventListener("click",t),e.closeModalBtnXClose.addEventListener("click",t)}(),a("5xh86"),a("7ghbD"),a("6mUVg");var h,b,_,L=a("bpxeT"),k=a("2TvXO"),E=(L=a("bpxeT"),k=a("2TvXO"),b=e(L)(e(k).mark((function t(n){var r,a;return e(k).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=n,e.next=3,fetch("https://books-backend.p.goit.global/books/".concat(n));case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),t)}))),function(e){return b.apply(this,arguments)});_=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("kFa2i");var S,H=new URL(_);S=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("hB25g");var T,w=new URL(S);T=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("dZRhD");var x=new URL(T),M=document.querySelector(".pop__btn"),q=document.getElementById("bookInfoUrl"),I=document.getElementById("bookInfo"),A=document.getElementById("bookInform"),B=document.querySelector(".pop-text");function j(e){E(e).then((function(e){I.insertAdjacentHTML("afterbegin","<li ".concat(e._id,'" >\n        <div class="modal-card__flex">\n          <div class="modal-card">\n          <img class="modal-card__image" src="').concat(e.book_image,'" alt="" />\n          \n        </div>\n        \n        </div>\n      </li>')),A.insertAdjacentHTML("afterbegin",'<div>\n          <h2 class="modal-card__title">'.concat(e.title,'</h2>\n          <p class="modal-card__author">').concat(e.author,'</p>\n          <p class="modal-card__description">').concat(e.description||"There is no description","</p>\n        </div>")),e.buy_links.map((function(e){"Amazon"===e.name&&q.insertAdjacentHTML("beforeend",'<li class="pop_shop-item">\n                            <a\n                            class="pop_shop__link link"\n                            href="'.concat(e.url,'"\n                            target="_blank"\n                            rel="noopener noreferrer"\n                            ><img\n                                class="modal_list-img"\n                                src="').concat(H,'" \n                                alt="amazon_shop_icon"/>\n                            </a>\n                        </li>')),"Apple Books"===e.name&&q.insertAdjacentHTML("beforeend",'<li class="pop_shop-item">\n                    <a\n                    class="pop_shop__link link"\n                    href="'.concat(e.url,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    ><img\n                        class="pop_list-img"\n                        src="').concat(w,'" \n                        alt="applebooks_shop_icon"\n                    />\n                    </a>\n                </li>')),"Bookshop"===e.name&&q.insertAdjacentHTML("beforeend",'<li class="pop_shop-item">\n                    <a\n                    class="pop_shop__link link"\n                    href="'.concat(e.url,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    ><img\n                        class="pop_list-img"\n                        src="').concat(x,'" \n                        alt="bookstore_shop_icon"\n                    />\n                    </a>\n                    </li>\n                    '))}))})),modal.style.display="block",document.getElementsByClassName("modal-btn")[0].onclick=function(){M.removeEventListener("click",C,!1),modal.style.display="none",q.innerHTML="",I.innerHTML="",A.innerHTML=""},window.addEventListener("keydown",(function(e){"Escape"===e.key&&(M.removeEventListener("click",C,!1),modal.style.display="none",q.innerHTML="",I.innerHTML="",A.innerHTML="")})),function(){M.dataset.id=h,null==localStorage.getItem("User-name")&&localStorage.setItem("User-name",JSON.stringify({name:"Not Authorized",email:"Not Authorized",listId:[]}));var e=localStorage.getItem("User-name");-1==JSON.parse(e).listId.indexOf(h)?(M.innerHTML="Add to shopping list",B.innerHTML=" "):(M.innerHTML="remove from the shopping lis",B.innerHTML="Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.");M.addEventListener("click",C,!1)}()}window.onclick=function(e){e.target==modal&&(M.removeEventListener("click",C,!1),modal.style.display="none",q.innerHTML="",I.innerHTML="",A.innerHTML="")};var C=function(e){var t=M.dataset.id,n=localStorage.getItem("User-name"),r=JSON.parse(n),a=r.name,o=r.email;if(-1==r.listId.indexOf(t))r.listId.push(t),localStorage.setItem("User-name",JSON.stringify({name:a,email:o,listId:r.listId})),e.target.innerHTML="remove from the shopping list",B.innerHTML="Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.",M.removeEventListener("click",C,!1),M.addEventListener("click",C,!1);else{var i=r.listId.filter((function(e){return e!=t}));localStorage.setItem("User-name",JSON.stringify({name:a,email:o,listId:i})),e.target.innerHTML="Add to shopping list",B.innerHTML="",M.removeEventListener("click",C,!1),M.addEventListener("click",C,!1)}};function U(e){return"\n  <ul class='bestseller-card'>\n  <li>\n    <div class = 'thumb'>\n      <img class='thumb__image' src='".concat(e.book_image,"' data-id='").concat(e._id,"' alt='").concat(e.title,"'/>\n        <div class=\"thumb__overlay\">\n        <p class=\"thumb__overlay-text\">QUICK VIEW</p>\n        </div> \n    </div>\n  </li>\n  <li>\n    <ul class='bestseller-card__meta'>\n      <li class='bestseller-card__title'>").concat(e.title,"</li>\n      <li class='bestseller-card__author'>").concat(e.author,"</li>\n    </ul\n  </li>\n  </ul>\n")}function O(e){return"\n      <ul class='bestseller-card --margin'>\n      <li>\n        <div class = 'thumb'>\n          <img class='thumb__image' src='".concat(e.book_image,"' data-id='").concat(e._id,"' alt='").concat(e.title,"'/>\n            <div class=\"thumb__overlay\">\n            <p class=\"thumb__overlay-text\">QUICK VIEW</p>\n            </div> \n        </div>\n      </li>\n      <li>\n        <ul class='bestseller-card__meta'>\n          <li class='bestseller-card__title'>").concat(e.title,"</li>\n          <li class='bestseller-card__author'>").concat(e.author,"</li>\n        </ul\n      </li>\n      </ul>\n    ")}function R(e){return"\n    <button class='button__see-more' type='button' name='See more' data-category='".concat(e,"'>See more</button>\n  ")}function N(){var e=document.querySelectorAll(".thumb__image"),t=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){a.value.addEventListener("click",(function(e){j(e.target.dataset.id)}))}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}var W={allCategoryContainer:document.querySelector(".bestSellers__container"),bestsellerContainer:document.querySelector(".bestSellers"),sectionTitle:document.querySelector(".section-title"),cardsQuantityByCategory:1,tabletWidth:768,pcWidth:1440};function F(e){var t=e.split(" "),n=e.substr(t[0].length);return'<span class="section-title">'.concat(t[0],"</span>\n  <span class='section-title--highlight'>").concat(n,"</span>")}function J(){return null!=localStorage.getItem("selected-category")&&"undefined"!==localStorage.getItem("selected-category")||(localStorage.getItem("selected-category"),!1)}function D(){return document.documentElement.clientWidth}function Q(){var e=document.querySelectorAll(".button__see-more"),t=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){a.value.addEventListener("click",(function(e){localStorage.setItem("selected-category",e.target.dataset.category),$()}))}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}function V(){var e=document.querySelectorAll(".categories__item"),t=document.querySelectorAll(".categories__link"),n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){o.value.addEventListener("click",(function(e){var n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){o.value.classList.remove("category-active")}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}e.target.classList.add("category-active"),localStorage.getItem("selected-category")!==e.target.dataset.category&&(localStorage.setItem("selected-category",e.target.dataset.category),$())}))}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}var z,X=function(){var t=e(L)(e(k).mark((function t(){var n,r,a,o;return e(k).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J()){e.next=10;break}return e.next=3,fetch("https://books-backend.p.goit.global/books/category?category=".concat(localStorage.getItem("selected-category")));case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.next=12,fetch("https://books-backend.p.goit.global/books/top-books");case 12:return a=e.sent,e.next=15,a.json();case 15:return o=e.sent,e.abrupt("return",o);case 17:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),K=function(){var t=e(L)(e(k).mark((function t(){var n,r;return e(k).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W.cardsQuantityByCategory=1,D()>=W.tabletWidth&&(W.cardsQuantityByCategory=3),D()>=W.pcWidth&&(W.cardsQuantityByCategory=5),!J()){e.next=10;break}return e.next=6,X().then((function(e){return e.map((function(e){return e}))}));case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.next=12,X().then((function(e){return e.map((function(e){return e.books.filter((function(e){return e.rank<=W.cardsQuantityByCategory}))}))}));case 12:return r=e.sent,e.abrupt("return",r);case 14:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function Y(){return Z.apply(this,arguments)}function Z(){return(Z=e(L)(e(k).mark((function t(){var n,r,a,o;return e(k).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:for(n=e.sent,W.sectionTitle.innerHTML="",W.sectionTitle.insertAdjacentHTML("afterbegin",'<span>BestSellers<span><span class="section-title--highlight">Books</span>'),a=0;a<n.length;a++)(o=document.createElement("div")).classList.add("category-container"),n[a].map((function(e){r=e.list_name,o.insertAdjacentHTML("beforeend",U(e))})),o.insertAdjacentHTML("afterbegin",'<h3 class="category-title">'.concat(r,"</h3>")),o.insertAdjacentHTML("beforeend",R(r)),W.allCategoryContainer.insertAdjacentElement("beforeend",o);Q(),N(),V();case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function P(){return G.apply(this,arguments)}function G(){return(G=e(L)(e(k).mark((function t(){var n,r,a;return e(k).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:for(n=e.sent,(r=document.createElement("div")).classList.add("category-container"),a=0;a<n.length;a++)r.insertAdjacentHTML("beforeend",O(n[a]));W.allCategoryContainer.insertAdjacentElement("beforeend",r),Q(),N(),V();case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function $(){return ee.apply(this,arguments)}function ee(){return(ee=e(L)(e(k).mark((function t(){return e(k).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W.allCategoryContainer.innerHTML="",J()?(W.sectionTitle.innerHTML="",W.sectionTitle.insertAdjacentHTML("afterbegin",F(localStorage.getItem("selected-category"))),P()):Y();case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}$(),z=D()<768?375:D()>=768&&D()<1440?768:1440,addEventListener("resize",(function(e){(window.innerWidth>767&&z<768||window.innerWidth>1439&&z<1440||window.innerWidth<1440&&z>1439||window.innerWidth<768&&z>767)&&location.reload()})),a("iNWLi"),a("c01wF")}();
//# sourceMappingURL=index.5e5617d9.js.map
