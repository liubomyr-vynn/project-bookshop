var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequire2d84;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},e.parcelRequire2d84=a),a("kyEFX").register(JSON.parse('{"5ZPII":"index.eea792c4.js","4Bpux":"amazon.99ff1432.jpg","3BxUJ":"applebooks.d7160da7.jpg","8rAoK":"bookstore.1c5b9883.jpg","l9VsI":"index.e087d496.js"}'));const o=document.querySelector(".categories__list");fetch("https://books-backend.p.goit.global/books/category-list").then((e=>e.json())).then((e=>{const t=e.sort(((e,t)=>e.list_name<t.list_name?-1:e.list_name>t.list_name?1:0)).map((({list_name:e})=>`<li class = "categories__item"><a href = "#" data-category = "${e}" class = "categories__link">${e}</a></li>`));return o.insertAdjacentHTML("beforeend",t.join("")),t}));a("bUb57");const s=document.querySelector(".modal-start"),l=document.querySelector(".backdrop-start"),i=document.querySelector(".login-btn"),r=document.querySelector(".modal__button-x"),c=document.querySelector("div[data-modal-start]"),d=document.querySelector('label[for="user_person"]'),m=document.querySelector("#user_person"),u=(document.querySelector('label[for="user_email"]'),document.querySelector("#user_email")),p=(document.querySelector('label[for="user_password"]'),document.querySelector("#user_password"));function g(){let e=!0;return""===m.value.trim()?(m.classList.add("modal-form__field-input--error"),e=!1):m.classList.remove("modal-form__field-input--error"),""!==u.value.trim()&&u.checkValidity()?u.classList.remove("modal-form__field-input--error"):(u.classList.add("modal-form__field-input--error"),e=!1),""===p.value.trim()||p.length<5||p.value.length>12?(p.classList.add("modal-form__field-input--error"),e=!1):p.classList.remove("modal-form__field-input--error"),e}s.addEventListener("submit",(function(e){e.preventDefault(),g()?(l.classList.add("is-hidden-start"),l.style.display="none"):console.log("Error!")})),i.addEventListener("click",(e=>{s.style.display="block"})),r.addEventListener("click",(e=>{s.style.display="none"})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&("Escape"!==e.key||s.contains(document.activeElement)||(s.classList.add("is-hidden-start"),l.classList.add("is-hidden-start")))})),l.addEventListener("click",(e=>{s&&e.target===l&&(s.classList.add("is-hidden-start"),l.classList.add("is-hidden-start"))})),i.addEventListener("click",(e=>{"none"===c.style.display&&(c.removeAttribute("style"),s.removeAttribute("style"))}));const y=document.querySelector('button[aria-label="link sing up"]'),_=document.querySelector('button[aria-label="link sing in"]');let f;y.classList.add("active"),y.addEventListener("click",(function(e){e.preventDefault(),s.style.height="516px",y.classList.add("active"),_.classList.remove("active"),s.classList.remove("sing-in"),d.style.display="block",m.style.display="block",m.parentElement.parentElement.classList.remove("is-invalid"),m.parentElement.parentElement.classList.add("is-valid"),s.style.height="516px"})),_.addEventListener("click",(function(e){e.preventDefault(),_.classList.add("active"),y.classList.remove("active"),s.classList.remove("sing-in"),s.style.height="450px",d.style.display="none",m.style.display="none",m.parentElement.parentElement.classList.add("is-invalid"),m.parentElement.parentElement.classList.remove("is-valid"),g()})),(()=>{const e={openModalBtnSingUp:document.querySelector("button[data-modal-start-open--sing-up]"),closeModalBtnXClose:document.querySelector("button[data-modal-start-close]"),formEl:document.querySelector("[data-modal-start]"),menu:document.querySelector("[data-menu]"),menuList:document.querySelector(".nav-list"),loginBtn:document.querySelector(".login-btn"),logOutBtn:document.querySelector(".login-btn-out")};function t(){e.formEl.classList.toggle("is-hidden-start"),e.formEl.classList.toggle("display"),e.formEl.classList.contains("display")&&(e.logOutBtn.classList.add("nav-hidden"),e.loginBtn.classList.add("nav-hidden"),e.menuList.classList.add("nav-hidden"),e.menu.classList.add("mobile-is-hidden"))}e.openModalBtnSingUp.addEventListener("click",t),e.closeModalBtnXClose.addEventListener("click",t)})(),a("fF5e9"),a("lsbs5"),a("i9TW1");var b;b=new URL(a("kyEFX").resolve("4Bpux"),import.meta.url).toString();const h=new URL(b);var v;v=new URL(a("kyEFX").resolve("3BxUJ"),import.meta.url).toString();const L=new URL(v);var k;k=new URL(a("kyEFX").resolve("8rAoK"),import.meta.url).toString();const S=new URL(k),E=document.querySelector(".pop__btn"),T=document.getElementById("bookInfoUrl"),H=document.getElementById("bookInfo"),w=document.getElementById("bookInform"),M=document.querySelector(".pop-text");function I(e){(async e=>{f=e;const t=await fetch(`https://books-backend.p.goit.global/books/${e}`);return await t.json()})(e).then((e=>{H.insertAdjacentHTML("afterbegin",`<li ${e._id}" >\n        <div class="modal-card__flex">\n          <div class="modal-card">\n          <img class="modal-card__image" src="${e.book_image}" alt="" />\n          \n        </div>\n        \n        </div>\n      </li>`),w.insertAdjacentHTML("afterbegin",`<div>\n          <h2 class="modal-card__title">${e.title}</h2>\n          <p class="modal-card__author">${e.author}</p>\n          <p class="modal-card__description">${e.description||"There is no description"}</p>\n        </div>`),e.buy_links.map((e=>{"Amazon"===e.name&&T.insertAdjacentHTML("beforeend",`<li class="pop_shop-item">\n                            <a\n                            class="pop_shop__link link"\n                            href="${e.url}"\n                            target="_blank"\n                            rel="noopener noreferrer"\n                            ><img\n                                class="modal_list-img"\n                                src="${h}" \n                                alt="amazon_shop_icon"/>\n                            </a>\n                        </li>`),"Apple Books"===e.name&&T.insertAdjacentHTML("beforeend",`<li class="pop_shop-item">\n                    <a\n                    class="pop_shop__link link"\n                    href="${e.url}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    ><img\n                        class="pop_list-img"\n                        src="${L}" \n                        alt="applebooks_shop_icon"\n                    />\n                    </a>\n                </li>`),"Bookshop"===e.name&&T.insertAdjacentHTML("beforeend",`<li class="pop_shop-item">\n                    <a\n                    class="pop_shop__link link"\n                    href="${e.url}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    ><img\n                        class="pop_list-img"\n                        src="${S}" \n                        alt="bookstore_shop_icon"\n                    />\n                    </a>\n                    </li>\n                    `)}))})),modal.style.display="block";document.getElementsByClassName("modal-btn")[0].onclick=function(){E.removeEventListener("click",A,!1),modal.style.display="none",T.innerHTML="",H.innerHTML="",w.innerHTML=""},window.addEventListener("keydown",(e=>{"Escape"===e.key&&(E.removeEventListener("click",A,!1),modal.style.display="none",T.innerHTML="",H.innerHTML="",w.innerHTML="")})),function(){E.dataset.id=f,null==localStorage.getItem("User-name")&&localStorage.setItem("User-name",JSON.stringify({name:"Not Authorized",email:"Not Authorized",listId:[]}));const e=localStorage.getItem("User-name");-1==JSON.parse(e).listId.indexOf(f)?(E.innerHTML="Add to shopping list",M.innerHTML=" "):(E.innerHTML="remove from the shopping lis",M.innerHTML="Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.");E.addEventListener("click",A,!1)}()}window.onclick=function(e){e.target==modal&&(E.removeEventListener("click",A,!1),modal.style.display="none",T.innerHTML="",H.innerHTML="",w.innerHTML="")};const A=function(e){let t=E.dataset.id,n=localStorage.getItem("User-name"),a=JSON.parse(n),o=a.name,s=a.email;if(-1==a.listId.indexOf(t))a.listId.push(t),localStorage.setItem("User-name",JSON.stringify({name:o,email:s,listId:a.listId})),e.target.innerHTML="remove from the shopping list",M.innerHTML="Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.",E.removeEventListener("click",A,!1),E.addEventListener("click",A,!1);else{let n=a.listId.filter((e=>e!=t));localStorage.setItem("User-name",JSON.stringify({name:o,email:s,listId:n})),e.target.innerHTML="Add to shopping list",M.innerHTML="",E.removeEventListener("click",A,!1),E.addEventListener("click",A,!1)}};function q(e){return`\n  <ul class='bestseller-card'>\n  <li>\n    <div class = 'thumb'>\n      <img class='thumb__image' src='${e.book_image}' data-id='${e._id}' alt='${e.title}'/>\n        <div class="thumb__overlay">\n        <p class="thumb__overlay-text">QUICK VIEW</p>\n        </div> \n    </div>\n  </li>\n  <li>\n    <ul class='bestseller-card__meta'>\n      <li class='bestseller-card__title'>${e.title}</li>\n      <li class='bestseller-card__author'>${e.author}</li>\n    </ul\n  </li>\n  </ul>\n`}function $(){let e=document.querySelectorAll(".thumb__image");for(const t of e)t.addEventListener("click",(e=>{I(e.target.dataset.id)}))}const B={allCategoryContainer:document.querySelector(".bestSellers__container"),bestsellerContainer:document.querySelector(".bestSellers"),sectionTitle:document.querySelector(".section-title"),cardsQuantityByCategory:1,tabletWidth:768,pcWidth:1440};function j(){return null!=localStorage.getItem("selected-category")&&"undefined"!==localStorage.getItem("selected-category")||(localStorage.getItem("selected-category"),!1)}function x(){return document.documentElement.clientWidth}function U(){let e=document.querySelectorAll(".button__see-more");for(const t of e)t.addEventListener("click",(e=>{localStorage.setItem("selected-category",e.target.dataset.category),W()}))}function C(){let e=document.querySelectorAll(".categories__item"),t=document.querySelectorAll(".categories__link");for(const n of e)n.addEventListener("click",(e=>{for(const e of t)e.classList.remove("category-active");e.target.classList.add("category-active"),localStorage.getItem("selected-category")!==e.target.dataset.category&&(localStorage.setItem("selected-category",e.target.dataset.category),W())}))}const R=async()=>{if(j()){const e=await fetch(`https://books-backend.p.goit.global/books/category?category=${localStorage.getItem("selected-category")}`);return await e.json()}{const e=await fetch("https://books-backend.p.goit.global/books/top-books");return await e.json()}},O=async()=>{if(B.cardsQuantityByCategory=1,x()>=B.tabletWidth&&(B.cardsQuantityByCategory=3),x()>=B.pcWidth&&(B.cardsQuantityByCategory=5),j()){return await R().then((e=>e.map((e=>e))))}return await R().then((e=>e.map((e=>e.books.filter((e=>e.rank<=B.cardsQuantityByCategory))))))};async function W(){B.allCategoryContainer.innerHTML="",j()?(B.sectionTitle.innerHTML="",B.sectionTitle.insertAdjacentHTML("afterbegin",function(e){let t=e.split(" "),n=e.substr(t[0].length);return`<span class="section-title">${t[0]}</span>\n  <span class='section-title--highlight'>${n}</span>`}(localStorage.getItem("selected-category"))),async function(){const e=await O(),t=document.createElement("div");t.classList.add("category-container");for(let a=0;a<e.length;a++)t.insertAdjacentHTML("beforeend",`\n      <ul class='bestseller-card --margin'>\n      <li>\n        <div class = 'thumb'>\n          <img class='thumb__image' src='${(n=e[a]).book_image}' data-id='${n._id}' alt='${n.title}'/>\n            <div class="thumb__overlay">\n            <p class="thumb__overlay-text">QUICK VIEW</p>\n            </div> \n        </div>\n      </li>\n      <li>\n        <ul class='bestseller-card__meta'>\n          <li class='bestseller-card__title'>${n.title}</li>\n          <li class='bestseller-card__author'>${n.author}</li>\n        </ul\n      </li>\n      </ul>\n    `);var n;B.allCategoryContainer.insertAdjacentElement("beforeend",t),U(),$(),C()}()):async function(){const e=await O();let t;B.sectionTitle.innerHTML="",B.sectionTitle.insertAdjacentHTML("afterbegin",'<span>BestSellers<span><span class="section-title--highlight">Books</span>');for(let n=0;n<e.length;n++){const a=document.createElement("div");a.classList.add("category-container"),e[n].map((e=>{t=e.list_name,a.insertAdjacentHTML("beforeend",q(e))})),a.insertAdjacentHTML("afterbegin",`<h3 class="category-title">${t}</h3>`),a.insertAdjacentHTML("beforeend",`\n    <button class='button__see-more' type='button' name='See more' data-category='${t}'>See more</button>\n  `),B.allCategoryContainer.insertAdjacentElement("beforeend",a)}U(),$(),C()}()}W(),function(){let e;e=x()<768?375:x()>=768&&x()<1440?768:1440,addEventListener("resize",(t=>{(window.innerWidth>767&&e<768||window.innerWidth>1439&&e<1440||window.innerWidth<1440&&e>1439||window.innerWidth<768&&e>767)&&location.reload()}))}(),a("2ix2C"),a("lJ5oQ");
//# sourceMappingURL=index.eea792c4.js.map
